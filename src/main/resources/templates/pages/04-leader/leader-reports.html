<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Báo cáo Thống kê - Lãnh đạo</title>
    <!-- Core CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="../../../static/assets/css/style.css">
    <link rel="stylesheet" href="../../../static/assets/css/internal.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="bg-light">

    <!-- WRAPPER -->
    <div class="d-flex" id="wrapper" th:with="currentPage='reports'">

        <!-- SIDEBAR -->
        <div th:replace="~{pages/04-leader/fragments/leader-layout :: sidebar}"></div>

        <!-- MAIN CONTENT -->
        <div style="margin-left: 260px; width: calc(100% - 260px);" class="d-flex flex-column min-vh-100">

            <!-- HEADER -->
            <nav th:replace="~{pages/04-leader/fragments/leader-layout :: header}"></nav>

            <main class="flex-grow-1 p-4">

                <!-- TOOLBAR -->
                <div class="card border-0 shadow-sm mb-4">
                    <div class="card-body p-3 d-flex gap-3 align-items-end">
                        <div class="flex-grow-1">
                            <label class="form-label small fw-bold">Kỳ báo cáo</label>
                            <select class="form-select">
                                <option>Tháng này (12/2025)</option>
                                <option>Quý IV/2025</option>
                                <option>Năm 2025</option>
                            </select>
                        </div>
                        <div class="flex-grow-1">
                            <label class="form-label small fw-bold">Loại báo cáo</label>
                            <select class="form-select">
                                <option>Tình hình giải quyết TTHC</option>
                                <option>Doanh thu phí & lệ phí</option>
                                <option>Thống kê số liệu Hộ tịch (Sinh/Tử/Kết hôn)</option>
                            </select>
                        </div>
                        <button class="btn btn-success fw-bold"><i class="bi bi-file-earmark-excel me-2"></i>Xuất
                            Excel</button>
                    </div>
                </div>

                <!-- TABS & CHART -->
                <div class="row g-4">
                    <div class="col-lg-8">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white fw-bold py-3">
                                <i class="bi bi-graph-up me-2"></i>Biểu đồ Xu hướng Hồ sơ
                            </div>
                            <div class="card-body">
                                <canvas id="trendChart" height="300"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- DATA SUMMARY -->
                    <div class="col-lg-4">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-header bg-white fw-bold py-3">
                                Tóm tắt Số liệu (Tháng 12)
                            </div>
                            <div class="list-group list-group-flush">
                                <div class="list-group-item d-flex justify-content-between">
                                    <span>Tiếp nhận mới:</span>
                                    <strong class="text-primary">1,250</strong>
                                </div>
                                <div class="list-group-item d-flex justify-content-between">
                                    <span>Đã giải quyết:</span>
                                    <strong class="text-success">1,180</strong>
                                </div>
                                <div class="list-group-item d-flex justify-content-between">
                                    <span>Đúng hạn:</span>
                                    <strong>98.5%</strong>
                                </div>
                                <div class="list-group-item d-flex justify-content-between bg-danger bg-opacity-10">
                                    <span>Trả lại / Từ chối:</span>
                                    <strong class="text-danger">20</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- DETAILED TABLE -->
                <div class="card border-0 shadow-sm mt-4">
                    <div class="card-header bg-white fw-bold py-3">
                        Chi tiết theo Lĩnh vực
                    </div>
                    <div class="card-body p-0">
                        <table class="table table-bordered table-striped mb-0">
                            <thead class="bg-light text-center">
                                <tr>
                                    <th>Lĩnh vực</th>
                                    <th>Tiếp nhận</th>
                                    <th>Đang xử lý</th>
                                    <th>Đã xong</th>
                                    <th>Tỷ lệ đúng hạn</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="fw-bold">Hộ tịch (Khai sinh, Kết hôn)</td>
                                    <td class="text-end">500</td>
                                    <td class="text-end">50</td>
                                    <td class="text-end">450</td>
                                    <td class="text-center text-success fw-bold">100%</td>
                                </tr>
                                <tr>
                                    <td class="fw-bold">Đất đai (Sổ đỏ, Tách thửa)</td>
                                    <td class="text-end">300</td>
                                    <td class="text-end">120</td>
                                    <td class="text-end">180</td>
                                    <td class="text-center text-warning fw-bold">95%</td>
                                </tr>
                                <tr>
                                    <td class="fw-bold">Xây dựng (Cấp phép)</td>
                                    <td class="text-end">200</td>
                                    <td class="text-end">80</td>
                                    <td class="text-end">120</td>
                                    <td class="text-center text-success fw-bold">98%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <!-- JS Logic -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const ctx = document.getElementById('trendChart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Tuần 1', 'Tuần 2', 'Tuần 3', 'Tuần 4'],
                datasets: [{
                    label: 'Tháng 12/2025',
                    data: [350, 420, 380, 450],
                    borderColor: '#0d6efd',
                    tension: 0.3,
                    fill: false
                },
                {
                    label: 'Tháng 11/2025',
                    data: [300, 380, 350, 400],
                    borderColor: '#adb5bd',
                    borderDash: [5, 5],
                    tension: 0.3,
                    fill: false
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'bottom' }
                }
            }
        });
    </script>
</body>

</html>