<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${s != null ? s.serviceName + ' - Chi tiết' : 'Chi tiết Thủ tục'}">Chi tiết Thủ tục - Cổng Dịch vụ
        công</title>
    <!-- Core CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" th:href="@{/assets/css/style.css}">
    <link rel="stylesheet" th:href="@{/assets/css/portal.css}">
    <style>
        .jumbotron-custom {
            background: linear-gradient(to right, #eef2f3, #8e9eab);
            /* Fallback */
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 1rem;
        }
    </style>
</head>

<body class="bg-light d-flex flex-column min-vh-100">

    <!-- 1. HEADER (Solid style for sub-pages) -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm-soft py-3 bg-gradient-primary">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center fw-bold fs-4" th:href="@{/citizen/dashboard}">
                <i class="bi bi-bank2 me-2"></i>DỊCH VỤ CÔNG ĐÀ NẴNG
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#landingNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="landingNav">
                <ul class="navbar-nav ms-auto gap-3 mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link fw-medium hover-white"
                            th:classappend="${activePage == 'home'} ? 'active fw-bold border-bottom border-2 border-warning text-warning' : 'text-white-50'"
                            th:href="@{/citizen/dashboard}">Trang chủ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link fw-medium hover-white"
                            th:classappend="${activePage == 'hoso'} ? 'active fw-bold border-bottom border-2 border-warning text-warning' : 'text-white-50'"
                            th:href="@{/citizen/hoso}">Hồ sơ của tôi</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link fw-medium hover-white"
                            th:classappend="${activePage == 'services'} ? 'active fw-bold border-bottom border-2 border-warning text-warning' : 'text-white-50'"
                            th:href="@{/citizen/services}">Dịch vụ công</a>
                    </li>
                    <li class="nav-item"><a class="nav-link fw-medium text-white-50 hover-white" href="#">Hướng dẫn</a>
                    </li>
                    <li class="nav-item"><a class="nav-link fw-medium text-white-50 hover-white"
                            th:href="@{/citizen/feedback}">Phản ánh kiến nghị</a></li>
                </ul>
                <div class="ms-lg-4 d-flex gap-2">
                    <a href="portal-landing.html" class="btn btn-outline-light fw-bold shadow-sm px-3">
                        <i class="bi bi-person-circle me-2"></i>Đăng nhập
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="container mt-5 pt-5 mb-5 pb-5">

        <!-- BREADCRUMB -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a th:href="@{/citizen/dashboard}">Trang chủ</a></li>
                <li class="breadcrumb-item"><a th:href="@{/citizen/services}">Dịch vụ công</a></li>
                <li class="breadcrumb-item active" aria-current="page"
                    th:text="${s != null ? s.serviceName : 'Chi tiết thủ tục'}">Chi tiết thủ tục</li>
            </ol>
        </nav>

        <!-- 2. HERO HEADER -->
        <div class="card card-modern shadow-lg-soft border-0 mb-5 position-relative overflow-hidden bg-white"
            th:if="${s != null}">
            <div class="card-body p-5">
                <div class="row align-items-center position-relative z-1">
                    <div class="col-lg-9">
                        <span
                            class="badge bg-primary bg-opacity-10 text-primary mb-2 px-3 py-2 rounded-pill text-uppercase"
                            th:text="${s.domain}">HỘ TỊCH</span>
                        <h2 class="display-6 fw-bold text-dark mb-4" th:text="${s.serviceName}">Đăng ký khai sinh</h2>
                        <div class="d-flex gap-3 flex-wrap">
                            <span class="badge bg-light text-dark border shadow-sm rounded-pill px-3 py-2">
                                <i class="bi bi-clock me-1 text-primary"></i>SLA: <span
                                    th:text="${s.slaHours + ' Giờ làm việc'}">1 Ngày làm việc</span>
                            </span>
                            <span class="badge bg-light text-dark border shadow-sm rounded-pill px-3 py-2">
                                <i class="bi bi-cash-coin me-1 text-success"></i>Phí: <span
                                    th:text="${s.feeAmount > 0 ? #numbers.formatDecimal(s.feeAmount, 0, 'COMMA', 0, 'POINT') + ' VNĐ' : 'Miễn phí'}">Miễn
                                    phí</span>
                            </span>
                            <span class="badge bg-light text-dark border shadow-sm rounded-pill px-3 py-2">
                                <i class="bi bi-layers me-1 text-info"></i>Mức độ: 4 (Toàn trình)
                            </span>
                        </div>
                    </div>
                    <!-- Decoration Icon -->
                    <div class="col-lg-3 text-center d-none d-lg-block">
                        <i class="bi bi-file-earmark-text text-primary opacity-25" style="font-size: 8rem;"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="alert alert-warning" th:if="${s == null}">
            Không tìm thấy thông tin thủ tục. <a th:href="@{/citizen/services}">Quay lại danh sách</a>
        </div>

        <div class="row" th:if="${s != null}">
            <div class="col-lg-8">

                <!-- 3. TABS INFO -->
                <ul class="nav nav-tabs mb-4" id="infoTabs" role="tablist">
                    <li class="nav-item">
                        <button class="nav-link active fw-bold" id="step-tab" data-bs-toggle="tab"
                            data-bs-target="#step" type="button">Trình tự thực hiện</button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link fw-bold" id="docs-tab" data-bs-toggle="tab" data-bs-target="#docs"
                            type="button">Thành phần hồ sơ</button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link fw-bold" id="legal-tab" data-bs-toggle="tab" data-bs-target="#legal"
                            type="button">Căn cứ pháp lý</button>
                    </li>
                </ul>

                <div class="tab-content mb-5" id="infoTabContent">

                    <!-- TAB 1: STEPS -->
                    <div class="tab-pane fade show active" id="step">
                        <div class="timeline border-start border-2 border-primary ps-4 ms-2">
                            <div class="mb-4 position-relative">
                                <span class="position-absolute top-0 start-0 translate-middle bg-primary rounded-circle"
                                    style="width: 12px; height: 12px; left: -1.6rem !important;"></span>
                                <h6 class="fw-bold text-primary">Bước 1: Nộp hồ sơ</h6>
                                <p class="text-muted">Công dân truy cập Cổng dịch vụ công, điền tờ khai trực tuyến và
                                    đính kèm bản chụp các giấy tờ theo quy định.</p>
                            </div>
                            <div class="mb-4 position-relative">
                                <span
                                    class="position-absolute top-0 start-0 translate-middle bg-secondary rounded-circle"
                                    style="width: 12px; height: 12px; left: -1.6rem !important;"></span>
                                <h6 class="fw-bold text-dark">Bước 2: Tiếp nhận và Xử lý</h6>
                                <p class="text-muted">Công chức Tư pháp - Hộ tịch kiểm tra hồ sơ. Nếu hồ sơ đầy đủ, tiến
                                    hành xử lý và trình Lãnh đạo UBND ký.</p>
                            </div>
                            <div class="mb-0 position-relative">
                                <span class="position-absolute top-0 start-0 translate-middle bg-success rounded-circle"
                                    style="width: 12px; height: 12px; left: -1.6rem !important;"></span>
                                <h6 class="fw-bold text-dark">Bước 3: Trả kết quả</h6>
                                <p class="text-muted">Công dân nhận bản điện tử trên Cổng Dịch vụ công hoặc bản giấy qua
                                    Bưu điện (nếu có đăng ký).</p>
                            </div>
                        </div>
                    </div>

                    <!-- TAB 2: DOCS -->
                    <div class="tab-pane fade" id="docs">
                        <div class="alert alert-info border-0">
                            <i class="bi bi-info-circle-fill me-2"></i>Các giấy tờ cần chuẩn bị (Chụp ảnh hoặc Scan)
                        </div>
                        <ul class="list-group list-group-flush" id="docList">
                            <li class="list-group-item d-flex align-items-center">
                                <i class="bi bi-check-circle-fill text-success me-3"></i>
                                <div>
                                    <strong>Hồ sơ pháp lý theo quy định</strong>
                                    <div class="small text-muted">(Xem chi tiết trong biểu mẫu đính kèm)</div>
                                </div>
                            </li>
                        </ul>

                        <!-- 4. TEMPLATES -->
                        <div class="mt-4 p-3 bg-light rounded border border-dashed">
                            <h6 class="fw-bold mb-2"><i class="bi bi-cloud-download me-2"></i>Biểu mẫu tham khảo</h6>
                            <div>
                                <a href="#" class="text-decoration-none me-3"><i
                                        class="bi bi-file-earmark-word me-1"></i>Mau_To_Khai_Chung.docx</a>
                                <a href="#" class="text-decoration-none"><i
                                        class="bi bi-file-earmark-pdf me-1"></i>Huong_Dan_Ke_Khai.pdf</a>
                            </div>
                        </div>
                    </div>

                    <!-- TAB 3: LEGAL -->
                    <div class="tab-pane fade" id="legal">
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item"><i class="bi bi-book me-2 text-muted"></i>Nghị định quy định chi
                                tiết về thủ tục hành chính trực tuyến</li>
                            <li class="list-group-item"><i class="bi bi-book me-2 text-muted"></i>Thông tư hướng dẫn
                                thực hiện dịch vụ công mức độ 4</li>
                        </ul>
                    </div>

                </div>

            </div>

            <!-- RIGHT COLUMN: SIDEBAR INFO -->
            <div class="col-lg-4">
                <div class="card card-modern border-0 shadow-sm-soft mb-4">
                    <div class="card-header bg-white fw-bold">
                        Thông tin hỗ trợ
                    </div>
                    <div class="card-body">
                        <div class="d-flex align-items-start mb-3">
                            <i class="bi bi-telephone-fill text-primary mt-1 me-3"></i>
                            <div>
                                <strong class="d-block">Tổng đài hỗ trợ</strong>
                                <span class="text-muted">1900 1022 (Nhánh 1)</span>
                            </div>
                        </div>
                        <div class="d-flex align-items-start">
                            <i class="bi bi-envelope-fill text-primary mt-1 me-3"></i>
                            <div>
                                <strong class="d-block">Email</strong>
                                <span class="text-muted">hotro@danang.gov.vn</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card card-modern border-0 shadow-sm-soft bg-warning bg-opacity-10">
                    <div class="card-body">
                        <h6 class="fw-bold text-warning"><i class="bi bi-lightbulb-fill me-2"></i>Lưu ý</h6>
                        <p class="small text-muted mb-0">
                            Công dân chịu trách nhiệm về tính chính xác của thông tin kê khai. Hệ thống sẽ tự động xác
                            thực với CSDL Dân cư Quốc gia.
                        </p>
                    </div>
                </div>
            </div>

        </div>

    </main>

    <!-- FOOTER -->
    <footer class="bg-footer-dark text-white py-5 mt-auto mb-5">
        <div class="container">
            <div class="row g-4">
                <div class="col-md-5">
                    <h5 class="fw-bold mb-4 text-uppercase text-white-50 small ls-1">Đơn vị vận hành</h5>
                    <div class="d-flex align-items-center mb-3">
                        <i class="bi bi-building fs-1 me-3 opacity-50"></i>
                        <div>
                            <h6 class="fw-bold mb-1">TRUNG TÂM HÀNH CHÍNH CÔNG</h6>
                            <p class="mb-0 small opacity-75">Thành phố Đà Nẵng</p>
                        </div>
                    </div>
                    <p class="small opacity-50">Hệ thống cung cấp dịch vụ công trực tuyến mức độ 3, 4 phục vụ người dân
                        và doanh nghiệp.</p>
                </div>
                <div class="col-md-3 offset-md-1">
                    <h5 class="fw-bold mb-4 text-uppercase text-white-50 small ls-1">Liên kết</h5>
                    <ul class="list-unstyled small opacity-75 d-flex flex-column gap-2">
                        <li><a href="#" class="text-white text-decoration-none hover-white"><i
                                    class="bi bi-chevron-right me-2"></i>Cổng thông tin Tp.</a></li>
                        <li><a href="#" class="text-white text-decoration-none hover-white"><i
                                    class="bi bi-chevron-right me-2"></i>Sở TT & TT</a></li>
                        <li><a href="#" class="text-white text-decoration-none hover-white"><i
                                    class="bi bi-chevron-right me-2"></i>Văn bản quy phạm</a></li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h5 class="fw-bold mb-4 text-uppercase text-white-50 small ls-1">Liên hệ</h5>
                    <p class="small opacity-75 mb-1"><i class="bi bi-geo-alt me-2"></i>24 Trần Phú, Hải Châu</p>
                    <p class="small opacity-75 mb-1"><i class="bi bi-telephone me-2"></i>(0236) 1022</p>
                    <p class="small opacity-75"><i class="bi bi-envelope me-2"></i>contact@danang.gov.vn</p>
                </div>
            </div>
            <hr class="opacity-10 my-4">
            <div class="text-center small opacity-50">
                &copy; 2025 E-Gov Simulation System (Static Prototype Mode)
            </div>
        </div>
    </footer>

    <!-- 5. ACTION STICKY BAR -->
    <div class="fixed-bottom bg-white border-top shadow py-3" th:if="${s != null}">
        <div class="container d-flex justify-content-between align-items-center">
            <div class="d-none d-md-block">
                <span class="text-muted small">Bạn đang xem:</span>
                <strong class="text-primary ms-1" th:text="${s.serviceName}">Đăng ký khai sinh</strong>
            </div>
            <div class="d-flex gap-2">
                <button class="btn btn-outline-secondary fw-bold" onclick="history.back()">Quay lại</button>
                <button class="btn btn-danger fw-bold px-4" th:data-service-code="${s.serviceCode}"
                    onclick="goToSubmitFromData(this)">
                    <i class="bi bi-send-fill me-2"></i>NỘP HỒ SƠ TRỰC TUYẾN
                </button>
            </div>
        </div>
    </div>

    <!-- JS Logic -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script th:inline="javascript">
        function goToSubmitFromData(element) {
            const code = element.getAttribute('data-service-code');
            goToSubmit(code);
        }

        function goToSubmit(code) {
            window.location.href = `/citizen/submit-wizard?code=${code}`;
        }
    </script>
</body>

</html>