<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thanh toán trực tuyến - Cổng Dịch vụ công</title>
    <!-- Core CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="../../assets/css/portal.css">
    <style>
        .payment-method-card {
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid #e9ecef;
        }

        .payment-method-card:hover {
            border-color: var(--bs-primary);
            background-color: #f8f9fa;
        }

        .payment-method-card.active {
            border-color: var(--bs-primary);
            background-color: rgba(13, 110, 253, 0.05);
        }

        .receipt-pattern {
            background-image: radial-gradient(#dee2e6 1px, transparent 1px);
            background-size: 10px 10px;
        }
    </style>
</head>

<body class="bg-light d-flex flex-column min-vh-100">

    <!-- 1. HEADER (Solid style for sub-pages) -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm-soft py-3 bg-gradient-primary">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center fw-bold fs-4" href="portal-landing.html">
                <i class="bi bi-bank2 me-2"></i>DỊCH VỤ CÔNG ĐÀ NẴNG
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#landingNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="landingNav">
                <ul class="navbar-nav ms-auto gap-3 mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link fw-medium text-white-50 hover-white"
                            href="portal-landing.html">Trang chủ</a></li>
                    <li class="nav-item"><a class="nav-link fw-medium text-white-50 hover-white"
                            href="portal-services.html">Dịch vụ công</a></li>
                    <li class="nav-item"><a class="nav-link fw-medium text-white-50 hover-white" href="#">Hướng dẫn</a>
                    </li>
                    <li class="nav-item"><a class="nav-link fw-medium text-white-50 hover-white"
                            href="portal-feedback.html">Phản ánh kiến nghị</a></li>
                </ul>
                <div class="ms-lg-4 d-flex gap-2">
                    <a href="portal-landing.html" class="btn btn-outline-light fw-bold shadow-sm px-3">
                        <i class="bi bi-person-circle me-2"></i>Đăng nhập
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="container mt-5 pt-5 mb-5 align-items-center justify-content-center d-flex flex-column flex-grow-1">

        <div class="row w-100 justify-content-center" id="paymentSection">
            <div class="col-lg-8">

                <h3 class="fw-bold text-center mb-4 text-primary">Thanh toán Phí/Lệ phí Hồ sơ</h3>

                <!-- BILL SUMMARY -->
                <div class="card border-0 shadow-sm mb-4">
                    <div class="card-header bg-white py-3 border-bottom">
                        <h6 class="fw-bold mb-0"><i class="bi bi-receipt me-2"></i>Chi tiết thanh toán</h6>
                    </div>
                    <div class="card-body p-4">
                        <div class="d-flex justify-content-between mb-2">
                            <span class="text-muted">Mã hồ sơ:</span>
                            <span class="fw-bold">HS-2023-008</span>
                        </div>
                        <div class="d-flex justify-content-between mb-3">
                            <span class="text-muted">Nội dung:</span>
                            <span>Phí thẩm định hồ sơ Đất đai</span>
                        </div>

                        <hr class="border-secondary border-opacity-10">

                        <div class="d-flex justify-content-between mb-2">
                            <span>Lệ phí hành chính</span>
                            <span>50.000 đ</span>
                        </div>
                        <!-- Conditional Tax Item -->
                        <div class="d-flex justify-content-between mb-2 d-none" id="taxLine">
                            <span>Thuế trước bạ / Thuế đất</span>
                            <span>5.000.000 đ</span>
                        </div>

                        <hr class="border-secondary border-opacity-25">

                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="fw-bold text-dark">Tổng tiền</h5>
                            <h4 class="fw-bold text-danger mb-0" id="totalAmount">50.000 đ</h4>
                        </div>
                    </div>
                </div>

                <!-- PAYMENT METHODS -->
                <h6 class="fw-bold mb-3">Chọn phương thức thanh toán</h6>
                <div class="row g-3 mb-4">
                    <div class="col-md-6">
                        <div class="card payment-method-card h-100 p-3" onclick="selectMethod(this, 'qr')">
                            <div class="d-flex align-items-center">
                                <i class="bi bi-qr-code-scan fs-3 text-primary me-3"></i>
                                <div>
                                    <div class="fw-bold">Quét mã QR</div>
                                    <div class="small text-muted">VNPAY, Momo, Banking app</div>
                                </div>
                                <div class="ms-auto">
                                    <input type="radio" name="method" class="form-check-input pointer-events-none"
                                        checked>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card payment-method-card h-100 p-3" onclick="selectMethod(this, 'atm')">
                            <div class="d-flex align-items-center">
                                <i class="bi bi-credit-card fs-3 text-success me-3"></i>
                                <div>
                                    <div class="fw-bold">Thẻ ATM Nội địa</div>
                                    <div class="small text-muted">Napas (24 Ngân hàng)</div>
                                </div>
                                <div class="ms-auto">
                                    <input type="radio" name="method" class="form-check-input pointer-events-none">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ACTION -->
                <button class="btn btn-success btn-lg w-100 py-3 fw-bold text-uppercase shadow-sm"
                    onclick="processPayment()">
                    <i class="bi bi-lock-fill me-2"></i>Thanh toán ngay
                </button>
                <div class="text-center mt-3">
                    <a href="portal-dashboard.html" class="text-decoration-none text-muted small">Hủy bỏ và quay về</a>
                </div>

            </div>
        </div>

        <!-- RECEIPT (SUCCESS STATE) -->
        <div id="receiptSection" class="d-none text-center animate-fade-in w-100">
            <div class="card border-0 shadow mx-auto receipt-pattern" style="max-width: 500px;">
                <div class="card-body p-5">
                    <div class="mb-4 text-success">
                        <i class="bi bi-check-circle-fill" style="font-size: 4rem;"></i>
                    </div>
                    <h4 class="fw-bold text-success mb-2">Thanh toán Thành công!</h4>
                    <p class="text-muted mb-4">Giao dịch của bạn đã được ghi nhận.</p>

                    <div class="bg-white p-3 border rounded mb-4 text-start small">
                        <div class="d-flex justify-content-between mb-1">
                            <span class="text-muted">Mã giao dịch:</span>
                            <span class="fw-bold">TRX-99887766</span>
                        </div>
                        <div class="d-flex justify-content-between mb-1">
                            <span class="text-muted">Thời gian:</span>
                            <span id="receiptTime">12/12/2025 10:30</span>
                        </div>
                        <div class="d-flex justify-content-between mb-1">
                            <span class="text-muted">Số tiền:</span>
                            <span class="fw-bold" id="receiptAmount">50.000 đ</span>
                        </div>
                    </div>

                    <a href="portal-dashboard.html" class="btn btn-primary w-100 fw-bold py-2 mb-2">
                        Về trang chủ
                    </a>
                    <a href="#" class="btn btn-outline-secondary w-100 btn-sm" onclick="window.print()">
                        <i class="bi bi-printer me-1"></i>In biên lai
                    </a>
                </div>
            </div>
        </div>

    </main>

    <!-- LOADING OVERLAY -->
    <div id="loadingOverlay"
        class="position-fixed top-0 start-0 w-100 h-100 bg-white bg-opacity-75 d-none flex-column align-items-center justify-content-center"
        style="z-index: 2000;">
        <div class="spinner-border text-primary mb-3" role="status" style="width: 3rem; height: 3rem;"></div>
        <h5 class="fw-bold text-primary animate-pulse">Đang xử lý giao dịch...</h5>
        <div class="text-muted small">Vui lòng không tắt trình duyệt</div>
    </div>

    <!-- FOOTER -->
    <footer class="bg-footer-dark text-white py-5 mt-auto">
        <div class="container">
            <div class="row g-4">
                <div class="col-md-5">
                    <h5 class="fw-bold mb-4 text-uppercase text-white-50 small ls-1">Đơn vị vận hành</h5>
                    <div class="d-flex align-items-center mb-3">
                        <i class="bi bi-building fs-1 me-3 opacity-50"></i>
                        <div>
                            <h6 class="fw-bold mb-1">TRUNG TÂM HÀNH CHÍNH CÔNG</h6>
                            <p class="mb-0 small opacity-75">Thành phố Đà Nẵng</p>
                        </div>
                    </div>
                    <p class="small opacity-50">Hệ thống cung cấp dịch vụ công trực tuyến mức độ 3, 4 phục vụ người dân
                        và doanh nghiệp.</p>
                </div>
                <div class="col-md-3 offset-md-1">
                    <h5 class="fw-bold mb-4 text-uppercase text-white-50 small ls-1">Liên kết</h5>
                    <ul class="list-unstyled small opacity-75 d-flex flex-column gap-2">
                        <li><a href="#" class="text-white text-decoration-none hover-white"><i
                                    class="bi bi-chevron-right me-2"></i>Cổng thông tin Tp.</a></li>
                        <li><a href="#" class="text-white text-decoration-none hover-white"><i
                                    class="bi bi-chevron-right me-2"></i>Sở TT & TT</a></li>
                        <li><a href="#" class="text-white text-decoration-none hover-white"><i
                                    class="bi bi-chevron-right me-2"></i>Văn bản quy phạm</a></li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h5 class="fw-bold mb-4 text-uppercase text-white-50 small ls-1">Liên hệ</h5>
                    <p class="small opacity-75 mb-1"><i class="bi bi-geo-alt me-2"></i>24 Trần Phú, Hải Châu</p>
                    <p class="small opacity-75 mb-1"><i class="bi bi-telephone me-2"></i>(0236) 1022</p>
                    <p class="small opacity-75"><i class="bi bi-envelope me-2"></i>contact@danang.gov.vn</p>
                </div>
            </div>
            <hr class="opacity-10 my-4">
            <div class="text-center small opacity-50">
                &copy; 2025 E-Gov Simulation System (Static Prototype Mode)
            </div>
        </div>
    </footer>

    <!-- JS Logic -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Init Mock Data
        const params = new URLSearchParams(window.location.search);
        const type = params.get('type');

        let amount = 50000;
        if (type === 'LAND') {
            amount = 5050000;
            document.getElementById('taxLine').classList.remove('d-none');
            document.getElementById('totalAmount').innerText = '5.050.000 đ';
        }

        function selectMethod(card, method) {
            // UI Toggle
            document.querySelectorAll('.payment-method-card').forEach(c => {
                c.classList.remove('active');
                c.querySelector('input').checked = false;
            });
            card.classList.add('active');
            card.querySelector('input').checked = true;
        }

        function processPayment() {
            // Show Loader
            const loader = document.getElementById('loadingOverlay');
            loader.classList.remove('d-none');
            loader.classList.add('d-flex');

            // Simulate API Delay
            setTimeout(() => {
                loader.classList.add('d-none');
                loader.classList.remove('d-flex');

                // Show Receipt
                document.getElementById('paymentSection').classList.add('d-none');
                document.getElementById('receiptSection').classList.remove('d-none');

                // Set Receipt Data
                document.getElementById('receiptTime').innerText = new Date().toLocaleString();
                document.getElementById('receiptAmount').innerText = document.getElementById('totalAmount').innerText;

            }, 2000);
        }
    </script>
</body>

</html>